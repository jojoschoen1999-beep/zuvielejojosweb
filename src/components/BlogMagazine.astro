---
import type { Post } from '../lib/substack';

interface Props {
  posts: Post[];
}

const { posts } = Astro.props;

function formatDate(d: string): string {
  const date = new Date(d);
  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }).toUpperCase();
}
---

{posts.length > 0 ? (
  <div class="blog-magazine">
    {posts.map(post => (
      <a href={post.link} target="_blank" rel="noopener noreferrer" class="blog-card">
        {post.image ? (
          <img src={post.image} alt="" class="blog-card-img" loading="lazy" />
        ) : (
          <div class="blog-card-img"></div>
        )}
        <div class="blog-card-body">
          <div class="blog-card-title">{post.title}</div>
          {post.excerpt && <div class="blog-card-sub">{post.excerpt}</div>}
          <div class="blog-card-meta">{formatDate(post.pubDate)} &middot; JOJO SCHÃ–N</div>
        </div>
      </a>
    ))}
  </div>
) : (
  <p style="text-align:center; color:var(--text-faint); font-style:italic; padding:3rem 0;">No posts found. Check back soon.</p>
)}
